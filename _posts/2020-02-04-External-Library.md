---
layout: post
title: 🎮게임 엔진 개발기(1) - 외부 라이브러리
date: 2020-01-24 20:45:46
description: 
img: GameEngine/Post1/BackGround.jpg # Add image post (optional)
tags: [game engine, c++]
author: Junyoung Kim # Add name author (optional)
---

# **서론**
이번 포스트에선, 본격적인 엔진 구조에 대해 이야기 하기 전, 외부 라이브러리의 종류와 차이점에 대해서 이야기 해보려고 한다.

<br>
<br>

# **외부 라이브러리**
**Beluga Engine**은 외부 라이브러리형 엔진이다. <span style="color:green">**라이브러리**</span>란, 컴파일된 후, 재사용 되길 기다리는 코드들의 집합체이다. 라이브러리가 편리한 이유는, 프로그래머가 직접 작성하지 않은 코드들을 사용할 수 있게 해주기 때문이다. 

외부 라이브러리는 두 가지 형태가 존재하는데, 바로 <span style="color:green"> **정적 라이브러리** </span> (.lib)와 <span style="color:green">**동적 라이브러리** </span> (.dll)이다. 

정적 라이브러리와 동적 라이브러리 사이의 간단한 차이점은 '언제 링크가 일어나는가?' 이며, 표로 나타내면 다음과 같다.

||정적 라이브러리|동적 라이브러리|
|---|---|---|
|링크가 일어나는 시점|컴파일 타임에 링크|런 타임에 링크|

<span style="color:green">**링킹**</span> (Linking)이란 실행 파일에서 함수 호출과 변수 사용을 실제 구현체의 위치와 연결하는 프로세스를 말한다. 

## **정적 라이브러리**
정적 라이브러리는 더 적은 런 타임 메모리를 요구한다. 프로젝트 내에서 사용되지 않는 부분이 무시되기 때문이다. 또한 좀 더 안전한데, 정적 라이브러리는 실행 파일의 일부이기에, 사용자가 악의적으로 데이터를 탈취하거나 혹은 임의적으로 기능을 교체하기 어렵기 때문이다. 

라이브러리를 만들때 정적 라이브러리로 개발되는 것은 굉장히 흔한 일이다. 또한 정적 라이브러리는 수 많은 컴파일러들을 지원하지 않아도 사용될 수 있다.

## **동적 라이브러리**
위에서 언급 했듯이 동적 라이브러리는 프로그램이 동작하는 동안 사용할 함수와 변수들의 메모리 위치를 질의(query) 한 뒤, 포인터에 해당 메모리를 할당하는 코드를 사용하면서 링크된다. 

문제는 이 과정동안 DLL 인젝션(DLL Injection: 악의적인 프로세스 조작)이 일어날 수 있다. 또한, 어떤 코드들이 내부에서 사용되는지 모르기 때문에, 모든 부분을 메모리에 적재해야한다. 64bit 프로세스에선 큰 걱정거리가 되지 않지만, 32bit에선 문제가 될 수 있다.

## **Beluga Engine 에서는?**
Beluga Engine은 정적 라이브러리로 작성되었다. 이유는 동적 라이브러리에 비해 비교적 작업하기 더 쉽기 때문이며, 라이브러리 경계를 넘나드는 메모리 전달을 걱정할 필요가 없기 때문이다.

<br>
<br>